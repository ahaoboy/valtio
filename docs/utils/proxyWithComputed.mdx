---
title: 'proxyWithComputed'
section: 'Utils'
description: ''
---

# proxyWithComputed

#### `proxyWithComputed` util

You can have computed values with dependency tracking with property access.
Dependency tracking in `proxyWithComputed` conflicts with the work in `useSnapshot`.
React users should prefer using `derive`.
`proxyWithComputed` works well for some edge cases and for vanilla-js users.

```js
import { proxyWithComputed } from 'valtio/utils'

const state = proxyWithComputed({
  count: 1,
}, {
  doubled() {
    return this.count * 2;
  },
  quadrupled: {
    get() {
      return this.doubled * 2;
    },
    set(v: number) {
      this.count = v >> 2;
    },
  },
})

// Computed values accept custom setters too:
const state2 = proxyWithComputed({
    firstName: 'Alec',
    lastName: 'Baldwin',
}, {
  fullName: {
    get() {
      return this.firstName + ' ' + snap.lastName
    },
    set(newValue) {
      ;[state.firstName, state.lastName] = newValue.split(' ')
    },
  },
  }
)

```

The last use case fails to infer types in TypeScript
[#192](https://github.com/pmndrs/valtio/issues/192).
